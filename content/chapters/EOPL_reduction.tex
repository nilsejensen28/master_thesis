\setchapterpreamble[u]{\margintoc}
\chapter{Reducing \Tarski\ to \EOPL}

In the previous chapter we saw how one can show membership of \Tarski\ in \PPAD\ using the a reduction to \Sperner. We now want to show that the same idea yields a reduction to \EndOfPotentialLine\ which lies in \EOPL. This will require a much more careful analysis of the structure of a \Tarski\ instance, and of the induced coloring of the lattice points. We will need to work directly with a certain simplical decomposition of the lattice, which we will build to have some \textit{useful} properties. The final goal will be to show that for a monotone \Tarski\ instance, the associated \EndOfLine\ instance does not contain any cycles. This will be enough to show that that we can obtain a reduction to \EndOfPotentialLine.

\section{Choosing a simplicial decomposition of the lattice --- Freudenthal's Simplical Decomposition}[Freudenthal's Simplical Decomposition]
\label{sec:freudenthal_simplicial_decomposition}

In the previous chapter we left the choice of a particular simplicial decomposition of the lattice open, as it was not relevant to the reduction. We now want to be more careful and choose a simplicial decomposition, which will help us prove some structural results. We first want to discuss what properties we want our simplicial decomposition to have. The first --- and obvious --- property we want our simplicial decomposition to have is that every simplex of the decomposition is contained in exactly one cell of the lattice. This means that we can reduce the question to finding a simplical decomposition of a single $d$-dimensional hypercube of side-length $1$. Also take note, that we do not want to add any vertices, but find a decomposition of the hypercube, that can be described as a set of subsets of the hypercube's vertices.	Finally we want the vertices of a given simplex to be totally ordered, with respect to the partial order defined in \cref{sec:tarski_problem}. This will allow us to argue that two vertices are always comparable, hence their images through $f$ must also be comparable which will be useful.

Such a decomposition exists, and is known in the litterature as \textit{Freudenthal's simplical decomposition} \sidecite{freudenthal_simplizialzerlegungen_1942}. We will introduce it in a combinatorial way here, and refer the reader to the original paper for a geometric construction of the same decomposition.

\begin{definition}[Freudenthal's Simplicial Decomposition]
    \label[definition]{def:freudenthal_simplicial_decomposition}
    Consider a unit hypercube $[0, 1]^d$ in $\R^d$ and consider $S_d$ the group of all permutations of the dimensions of the hypercube $\{1, \dots, d\}$. For every permutation $\pi \in S_d$, define the simplex $S_{\pi}$ as the convex hull of the vertices:
    \marginnote[10mm]{Here we will use the notation $e_i$ to denote the $i$-th \define{unit vector} in $\R^d$.}
    \begin{align*}
        v_0 & = (0, 0, \dots, 0)                        \\
        v_1 & = v_0 + e_{\pi(1)}                        \\
        v_2 & = v_1 + e_{\pi(2)}                        \\
            & \vdots                                    \\
        v_d & = v_{d-1} + e_{\pi(d)} = (1, 1, \dots, 1)
    \end{align*}
    The set of such simplexes $\mathcal{S} = \set{S_{\pi} : \pi \in S_d}$ is Freudenthal's simplicial decomposition of the hypercube $[0, 1]^d$.
\end{definition}
We want to begin by arguing why this decomposition is well-defined. We begin by showing that every point of the hypercube is contained in at least one simplex of $\mathcal{S}$.
\begin{lemma}
    \label{lem:caracterisation_of_simplices}
    Let $x = (x[1], \dots, x[d]) \in [0, 1]^d$, let $\pi \in S^d$ be the permutation such that $x[\pi(1)] \leq x[\pi(2)] \leq \dots \leq x[\pi(d)]$. Then $x \in S_{\pi}$.
\end{lemma}
\begin{proof}
    We want to show that $x$ is a convex combination of the vertices of $S_{\pi}$. We define the following sequence of real numbers:
    \begin{align*}
        \lambda_0     & = x[\pi(1)]               \\
        \lambda_1     & = x[\pi(2)] - x[\pi(1)]   \\
        \lambda_2     & = x[\pi(3)] - x[\pi(2)]   \\
                      & \vdots                    \\
        \lambda_{d-1} & = x[\pi(d)] - x[\pi(d-1)] \\
        \lambda_d     & = 1 - x[\pi(d)]
    \end{align*}
    Notice that we have $\lambda_i \geq 0$ for all $i$ and $\sum_{i=0}^{d} \lambda_i = 1$, by telescoping the sum. We can now write $x$ as a convex combination of the vertices of $S_{\pi}$ as follows by noticing that $v_i = \sum_{j=0}^{i} e_{\pi(j)}$:
    \begin{align*}
        \sum_{i=0}^{d} \lambda_i v_i & = \sum_{i=0}^{d} \lambda_i \left( \sum_{j=0}^{i} e_{\pi(j)} \right)  = \sum_{i=0}^{d} \sum_{j=1}^{i} \lambda_i e_{\pi(j)}                                \\
                                     & = \sum_{j=1}^{d} \sum_{i=0}^{j} \lambda_i e_{\pi(j)}  = \sum_{j=1}^{d} e_{\pi(j)} \sum_{i=0}^{j} \lambda_i		 = \sum_{j=1}^{d} e_{\pi(j)} x[\pi(j)]		     = x
    \end{align*}
    This shows that $x$ is a convex combination of the vertices of $S_{\pi}$, and thus $x \in S_{\pi}$.
\end{proof}
Next we want to discuss why this really forms a partition of the hypercube. Of course a given point $x$ can be contained in multiple simplexes, but we want to show that this does not happen appart from on the boundary of the simplices.
\begin{lemma}
    Let $S_{\pi} \in \mathcal{S}$ be a simplex. Then the \define{interior} of $S_{\pi}$ is:
    \begin{align*}
        \interior{S_{\pi}} = \set{x \in [0, 1]^d : 0 < x[\pi(1)] < x[\pi(2)] < \dots < x[\pi(d)] < 1}
    \end{align*}
\end{lemma}
\begin{proof}
    The same proof as for lemma \ref{lem:caracterisation_of_simplices}, holds with the added constraint that all $\lambda_i > 0$, this then shows that these points are in the interior of the simplex.
\end{proof}
These two lemma's together show that we have a well-defined simplicial decomposition of the hypercube. We can now use this decomposition to prove some structural results about the lattice points of a \Tarski\ instance. We start by showing that this simplicial decomposition has the desired properties.
\begin{lemma}
    Let $S_{\pi} \in \mathcal{S}$ be a simplex. Then the vertices of $S_{\pi}$ are totally ordered with respect to the partial order defined in \cref{sec:tarski_problem}. In particular we claim that:
    \begin{align*}
        v_0 < v_1 < v_2 < \dots < v_d
    \end{align*}
\end{lemma}
\begin{proof}
    Because this relation is transitive it suffice to show that $v_i < v_{i+1}$ for all $i \in \set{0, \dots, d-1}$. This follows immediately from the construction of the $v_i$ as we have $v_i[j] = v_{i+1}[j]$ for all $j \neq \pi(i+1)$ and $v_i[\pi(i+1)] = v_{i+1}[\pi(i+1)] - 1$.
\end{proof}
This directly implies the following corollary.
\begin{corollary}
    \label{cor:total_ordering}
    For two vertices $x,y$ of any simplex $S \in \mathcal{S}$, if for any $i \in \set{1, \dots, d}$ we have $x[i] < y[i]$, then $x < y$. In particular $x \not\leq y$ is equivalent to $x > y$.
\end{corollary}
Notice that this is not the case for any two points in the hypercube, as the partial order is not a total order. This is why choosing a simplicial decomposition with this property will be crucial in the following sections. Next we want to introduce a new notation which will allow us describe these simplices more succintly. Assume that a permutation $\pi$ of the dimensions, induces a simplex $S_{\pi}$, woth vertices $v_0, \dots, v_d$, as defined in \cref{def:freudenthal_simplicial_decomposition}. Then we will denote the $d$-dimensional simplex $S_{\pi}$ as:
\begin{align*}
    v_0 \xrightarrow{\pi(1)} v_1 \xrightarrow{\pi(2)} v_2 \xrightarrow{\pi(3)} \cdots \xrightarrow{\pi(d)} v_d
\end{align*}
This notation means that we obtain $v_i$ by moving by one unit-length in the direction $\pi(i)$ from $v_{i-1}$. We already briefly discussed how the faces of a given simplex are given. We will also describe how to describe these faces in our notation. We will denote the face of $S_{\pi}$ obtained by removing the vertex $v_i$ as:
\begin{align*}
    v_0 \xrightarrow{\pi(1)} v_1 \xrightarrow{\pi(2)} \cdots v_{i-1} \xrightarrow{\pi(i), \pi(i+1)} v_{i+1} \xrightarrow{\pi(i+2)} \cdots \xrightarrow{\pi(d)} v_d
\end{align*}

We can remark the following about the faces of a simplex.
\begin{remark}
    \label[remark]{rem:faces_of_simplex}
    For a given $d-1$ dimensional simplex $F$ in $\mathcal{S}$ we have that:
    \marginnote[0mm]{Notice that the case \ref{rem:face_inside_cell} is the case where the face is inside the cell, and the case \ref{rem:face_border_cell} is the case where the face is on the border of the cell.}
    \begin{enumerate}
        \item If $F$ is of the form:
              \begin{align*}
                  F: \quad v_0 \xrightarrow{\pi(1)}  \cdots v_{i-1} \xrightarrow{\pi(i), \pi(i+1)} v_{i+1} \xrightarrow{\pi(i+2)} \cdots \xrightarrow{\pi(d)} v_d
              \end{align*}
              Then $F$ is a face of exactly two simplices $S_1$ and $S_2$:
              \begin{align*}
                  S_1: \quad & v_0 \xrightarrow{\pi(1)} \cdots v_{i-1} \xrightarrow{\pi(i+1)} w_i \xrightarrow{\pi(i)} v_{i} \xrightarrow{\pi(i+2)} \cdots \xrightarrow{\pi(d)} v_d  \\
                  S_2: \quad & v_0 \xrightarrow{\pi(1)} \cdots v_{i-1} \xrightarrow{\pi(i)} w_i' \xrightarrow{\pi(i+1)} v_{i} \xrightarrow{\pi(i+2)} \cdots \xrightarrow{\pi(d)} v_d
              \end{align*}
              \label{rem:face_inside_cell}
        \item If $F$ is of the form:
              \begin{align*}
                  F: \quad v_0 \xrightarrow{\pi(1)} v_1 \xrightarrow{\pi(2)} \cdots  \xrightarrow{\pi(d-1)} v_{d-1}
              \end{align*}
              Then $F$ is a face of exactly two simplices $S_1$ and $S_2$:
              \begin{align*}
                  S_1: & \quad v_0 \xrightarrow{\pi(1)} v_1 \xrightarrow{\pi(2)} \cdots \xrightarrow{\pi(d-1)} v_{d-1} \xrightarrow{\pi(d)} w_d \\
                  S_2: & \quad w_0 \xrightarrow{\pi(d)} v_0 \xrightarrow{\pi(1)} v_1 \xrightarrow{\pi(2)} \cdots \xrightarrow{\pi(d-1)} v_{d-1} \\
              \end{align*}
              \label{rem:face_border_cell}
    \end{enumerate}
\end{remark}

We want to discuss what simplices of the decomposition neighboor each other. We claim that a given simplex has $d-1$ neighbooring simplices inside a given cell, and two neighbooring simplices in neighbooring cells. More precisely we have the following lemma.

\begin{lemma}[Neighbooring Simplices]
    Let $S_{\pi} \in \mathcal{S}$ be a simplex:
    \begin{align*}
        v_0 \xrightarrow{\pi(1)} v_1 \xrightarrow{\pi(2)} v_2 \xrightarrow{\pi(3)} \cdots \xrightarrow{\pi(d)} v_d
    \end{align*}
    Then the following simplices are neighboors of $S_{\pi}$:
    \begin{itemize}
        \item $v_0 \xrightarrow{\pi(2)} v_1 \xrightarrow{\pi(1)} \cdots v_{i-1} \xrightarrow{\pi(i+1)} w_i \xrightarrow{\pi(i+1)} v_{i} \xrightarrow{\pi(i+2)} \cdots \xrightarrow{\pi(d)} v_d$, for all $i \in \set{1, \dots, d-1}$, where $w_i$ is the vertex obtained by moving one unit in the direction $\pi(i+1)$ from $v_{i-1}$.
        \item $w_d \xrightarrow{\pi(d)} v_0 \xrightarrow{\pi(1)} v_1 \xrightarrow{\pi(2)} \cdots \xrightarrow{\pi(d-1)} v_{d-1}$, where $w_d$ is the vertex obtained by moving one unit in the direction $-\pi(d)$ from $v_{0}$.
        \item $v_2 \xrightarrow{\pi(2)} \cdots \xrightarrow{\pi(d-1)} v_{d-1} \xrightarrow{\pi(d)} v_d \xrightarrow{\pi(1)} w_1$, where $w_1$ is the vertex obtained by moving one unit in the direction $\pi(1)$ from $v_d$.
    \end{itemize}
\end{lemma}
\begin{proof}
    The proof follows directly by enumerating the faces of $S_{\pi}$ and using remark \ref{rem:faces_of_simplex}.
\end{proof}

\section{Orientation of a the simplicial decomposition}[Orientating the simplices]

In this section we want to discuss how to orient the simplicial decomposition of the lattice, we defined in the previous section. This will be important as we will argue in the next section, that the existence of a cycle would contradict the orientation of the simplicial decomposition. We will start by defining what we mean by an orientation of a simplex and then discuss how to extend this to a general simplicial complex.

\subsection{Orientation of a simplex}[Orienting a simplex]
\label{sec:orientation_of_simplex}

\begin{definition}[Orientation of a simplex]
    An \define{orientation} of a simplex $S$ spanned by the vertices $v_0, \dots, v_d$ is a choice of a permutation of the vertices $[v_{\pi(0)}, \dots, v_{\pi(d)}]$.
\end{definition}

Notice that this leaves us with $d!$ possible orientations of a simplex. Our notion of orientability should only lead to two possible classes of orientations, as an orientation of a 1-simplex is simply a choice of direction, and an orientation of a 2-simplex is a choice of a cyclic order of the vertices. Hence we want to define when two orientations are equivalent.

\begin{definition}[Equivalent orientations]
    Two orientations $\pi$ and $\sigma$ of a simplex $S$ are \define{equivalent} if they differ by an even permutation. That is if $\sigma = \pi \circ \tau$ for some permutation $\tau$ with an even number of inversions.
\end{definition}

In particular we give a more explicit definition of the equivalence of orientations of a 2-simplex, by relying on a total order $\preceq$ of the vertices\marginnote{For a lattice this can be achieved by defining $\preceq$ to be the lexicographic order of the vertices.}. We then get the following useful lemma:

\begin{lemma}
    Two orientations $\sigma, \tau$ of a simplex $S$ are equivalent if and only if $\sgn{\sigma} = \sgn{\tau}$, with respect to the total order $\preceq$.
\end{lemma}

We would like to define the \define{opposite orientation} of a simplex, which should be an orientation which has the opposite sign with respect to the total order $\preceq$. This can be achieved by setting:
\begin{align*}
    - [v_0, v_1, v_2, \dots, v_d] = [v_1, v_0, v_2, \dots, v_d]
\end{align*}
We then have that the opposite orientation is not equivalent to the original orientation. This way we have a representative of both equivalence classes.

This means that we now have two equivalence classes of orientations for any simplex. We want to discuss how an orientation of a simplex extends to the faces of this simplex next. Notice that the faces of a simplex are themselves simplices, and thus have an orientation. Let $[v_0, \dots, v_{d}]$ be an orientation of a simplex $S$. Now notice that every face can be obtained by removing one of the vertices $v_j$ of $S$. Hence for every face $F$, the permutation $[v_0, \dots, \hat{v_j}, \dots, v_{d}]$ is an orientation of $F$\marginnote{We use the notation $\hat{v_j}$ to denote that $v_j$ is missing.}. But the orientation $- [v_0, \dots, \hat{v_j}, \dots, v_{d}]$ is also a valid orientation of $F$. For reasons which will become appearent latter we define the induced orientation of a face as follows:

\begin{definition}[Induced orientation of a face]
    Let $\sigma = [v_0, \dots, v_{d}]$ be an orientation of a simplex $S$. The \emph{induced orientation} of a face $F$ of $S$, which is obtained by removing the vertex $v_j$ from the vertex, is the orientation:
    \begin{align*}
        \sigma_j = (-1)^j \cdot [v_0, \dots, \hat{v_j}, \dots, v_{d}]
    \end{align*}
\end{definition}

We claim that the induced orientations of faces, yields a consistent orientation of the simplex, that is that for every $d-2$-simplex $E$ which is a face of two $d-1$-simplices $S_1$ and $S_2$, the induced orientations of $E$ in $S_1$ and $S_2$ are opposite.

\begin{claim}
    \label{claim:opposite_orientations}
    Let $F_1$ and $F_2$ be two $d-1$-simplices in $S$ which share a common face $E$. Then the induced orientations of $E$ in $S_1$ and $S_2$ are opposite.
\end{claim}
\begin{proof}
    Let $[v_0, \dots, v_{d}]$ be an orientation of $S$. The face $E$ is obtained by removing two vertices $v_i, v_j$ from $S$. Without loss of generality assume that $F_1$ is obtained by removing $v_i$ from $S$ and $F_2$ is obtained by removing $v_j$ from $S$. Then the induced orientations $S_1$ and $S_2$ are:
    \begin{align*}
        S_1: \quad & (-1)^i \cdot [v_0, \dots, \hat{v_i}, \dots, v_{d}] \\
        S_2: \quad & (-1)^j \cdot [v_0, \dots, \hat{v_j}, \dots, v_{d}]
    \end{align*}
    Now without loss of generality assume that $i < j$, then we have that the induced orientations of $E$ in $S_1$ and $S_2$ are:
    \begin{align*}
        \text{$E$ in $S_1$ }: \quad & (-1)^i \cdot (-1)^{j-1} \cdot [v_0, \dots, \hat{v_i}, \dots, \hat{v_j}, \dots, v_{d-1}] \\
        \text{$E$ in $S_2$ }: \quad & (-1)^j \cdot (-1)^i \cdot [v_0, \dots, \hat{v_i}, \dots, \hat{v_j}, \dots, v_{d-1}]
    \end{align*}
    This shows that the induced orientations of $E$ in $S_1$ and $S_2$ are opposite.
\end{proof}

\begin{figure}[ht]
    \centering
    \incfig{Orientation_of_Simplex}
    \caption[Orientation of a simplex]{Example of the orientation of a 3-simplex on the left, and the induced orientation of the faces on the right.}
    \label{fig:orientation_of_simplex}
\end{figure}

We give an example of the orientation of a 3-simplex and its faces in \cref{fig:orientation_of_simplex}. We can now discuss how we can extend this notion to a general simplicial complex.

\subsection{Orientation of a simplicial complex}[Orienting a simplicial complex]

A simplicial complex can be thought of as a collection of simplices which are be glued together on their face. Our goal is now to extend this notion of orientation to these simplicial complexes. Formally we define a simplicial complex as follows \sidecite{munkres_elements_2018}:

\begin{definition}[Simplicial complex]
    A \define{simplicial complex} $\mathcal{K}$ in $\R^d$ is a collection of simplices such that:
    \begin{enumerate}
        \item Every face of a simplex in $\mathcal{K}$ is also in $\mathcal{K}$.
        \item The intersection of any two simplices in $\mathcal{K}$ is a face of both simplices.
    \end{enumerate}
\end{definition}

Notice that the lattice points which we are interested in, together with Freudenthal's simplicial decomposition of each cell, form a simplicial complex. We now want to define an orientation of a simplicial complex. Of course such an orientation relies on an orientation of each simplex, and we want to make sure that these orientations are in some sence ``compatible'' on the faces of the simplicial complex. We will define this notion in the following definition.

\begin{definition}[Orientation of a simplicial complex]
    An \define{orientation} of a simplicial complex $\mathcal{K}$ is a choice of an orientation of every $d$-simplex in $\mathcal{K}$, such that for every intersection of two simplices $S_1, S_2 \in \mathcal{K}$, the induced orientation of the face $F = S_1 \cap S_2$ in $S_1$ and $S_2$ are opposite. \par
    If such an orientation exists, we say that the simplicial complex is \define{orientable}.
\end{definition}

We now claim that the simplicial complex formed by the lattice points and Freudenthal's simplicial decomposition is orientable. This will be crucial in the next section, where we will argue that the existence of a cycle in the \EndOfLine\ instance would contradict the orientation of the simplicial complex. In particular this shows that a Mobius Strip or the higher dimensional equivalents do not exist in our simplicial complex.

\begin{claim}
    The simplicial complex formed by the lattice points and Freudenthal's simplicial decomposition is orientable.
\end{claim}

\begin{figure}[h]
    \centering
    \incfig{Orientation_of_Freudenthal_Example}
    \caption[Orientation of a simplicial complex]{Example of the orientation of a Freundenthals simplicial complex in 2 dimensions.}
    \label{fig:orientation_of_simplicial_complex}
\end{figure}

\begin{proof}
    We will give an orientation of every $d$ simplex, and then show that the induced orientation of the faces of the simplicial complex are opposite.
    Let $\pi \in S^d$ be a permutation of the dimensions, and $v_0 \in L$ a vertex of the lattice. We then obtain a simplex $S_{\pi} \in \mathcal{S}$ as previously described:
    \begin{align*}
        v_0 \xrightarrow{\pi(1)} v_1 \xrightarrow{\pi(2)} v_2 \xrightarrow{\pi(3)} \cdots \xrightarrow{\pi(d)} v_d
    \end{align*}
    We now orient $S_{\pi}$ using the permutation:
    \begin{align*}
        \sigma = \sgn{\pi} \cdot [v_0, \dots, v_d]
    \end{align*}
    First we notice that for all $d-2$ simplices, two neighbooring $d-1$-simplices are contained  in exactly one $d$ simplex of the decomposition, and hence the orientation is consistent, as discussed in claim \ref{claim:opposite_orientations}. \par
    Now let us look at a common face $F$ of two $d$-simplices $S_1$ and $S_2$. We proceed by case distinction:
    \begin{case}{1}
        Assume that $S_1$ and $S_2$ are in the same cell, then $F$ is of the form:
        \begin{align*}
            F: \quad v_0 \xrightarrow{\pi(1)}  \cdots v_{i-1} \xrightarrow{\pi(i), \pi(i+1)} v_{i+1} \xrightarrow{\pi(i+1)} v_{i} \xrightarrow{\pi(i+2)} \cdots \xrightarrow{\pi(d)} v_d
        \end{align*}
        And we have that $S_1$ and $S_2$ are of the form:
        \begin{align*}
            S_1: \quad & v_0 \xrightarrow{\pi(1)} \cdots v_{i-1} \xrightarrow{\pi(i+1)} w_i \xrightarrow{\pi(i)} v_{i} \xrightarrow{\pi(i+2)} \cdots \xrightarrow{\pi(d)} v_d  \\
            S_2: \quad & v_0 \xrightarrow{\pi(1)} \cdots v_{i-1} \xrightarrow{\pi(i)} w_i' \xrightarrow{\pi(i+1)} v_{i} \xrightarrow{\pi(i+2)} \cdots \xrightarrow{\pi(d)} v_d
        \end{align*}
        We immediately notice that $\sgn{S_1} = - \sgn{S_2}$\marginnote{By abuse of notation we will denote by $\sgn{S_1}$ the sign of the permutation inducing $S_1$.}. We remove a vertex $w_i, w_i'$ of the same rank in $S_1$ and $S_2$ in order to obtain $F$. Hence the induced orientation of $F$ in $S_1$ and $S_2$ are opposite.
    \end{case}
    \begin{case}{2}
        Next assume that $S_1$ and $S_2$ are in neighbooring cells, then as dicussed in \cref{rem:faces_of_simplex} $F$ is of the form:
        \begin{align*}
            F: \quad v_0 \xrightarrow{\pi(1)} v_1 \xrightarrow{\pi(2)} \cdots  \xrightarrow{\pi(d-1)} v_{d-1}
        \end{align*}
        And we have that $S_1$ and $S_2$ are of the form:
        \begin{align*}
            S_1: & \quad v_0 \xrightarrow{\pi(1)} v_1 \xrightarrow{\pi(2)} \cdots \xrightarrow{\pi(d-1)} v_{d-1} \xrightarrow{\pi(d)} w_d \\
            S_2: & \quad w_0 \xrightarrow{\pi(d)} v_0 \xrightarrow{\pi(1)} v_1 \xrightarrow{\pi(2)} \cdots \xrightarrow{\pi(d-1)} v_{d-1} \\
        \end{align*}
        We once again must proceed by case distinction.
        \begin{case}{2.1}
            If $d$ is even, then: $\sgn{S_1} = - \sgn{S_2}$, and we remove a vertex of rank $d$ in $S_1$ and of rank $0$ in $S_2$ to obtain $F$. We have $(-1)^d = (-1)^0 = 1$ and hence the induced orientation of $F$ in $S_1$ and $S_2$ are opposite.
        \end{case}
        \begin{case}{2.2}
            If $d$ is odd, then $\sgn{S_1} = \sgn{S_2}$, and we remove a vertex of rank $d$ in $S_1$ and of rank $0$ in $S_2$ to obtain $F$. We have $(-1)^d = -1$ and $(-1)^0 = 1$ and hence the induced orientation of $F$ in $S_1$ and $S_2$ are opposite.
        \end{case}
    \end{case}
    This shows that the simplicial complex formed by the lattice points and Freudenthal's simplicial decomposition is orientable.
\end{proof}

We give an example of such an orientation in \cref{fig:orientation_of_simplicial_complex}. We have now introduced the necessary tools to argue that a certain type of cycle cannot exist as we will argue in the following.

\section{Sequences of simplices}[Sequences of simplices]

In this section we want to introduce and study \emph{sequences of simplices}. We will show that they have some nice properties in regard to the orientation of the simplicial decomposition which we previously discussed. This will be useful as we will argue that paths in the \EndOfLine\ instance are sequences of simplices, and that the orientation of the simplicial decomposition will prevent these paths from forming cycles. We will start by defining what we mean by a sequence of simplices.

\begin{definition}[Sequence of simplices]
    \label{def:sequence_of_simplices}
    A \emph{sequence of simplices}, or \define{simplicial sequence} is a sequence $\left(S_i\right)_{i=1}^{k}$ of $d$-dimensional simplices $S_i \in \mathcal{S}$ such that:
    \begin{enumerate}
        \item $S_{i+1} \not\subset \set{S_1, \dots, S_i}$ for all $i \in \set{1, \dots, k-1}$.
        \item $S_i$ and $S_{i+1}$ share a $d-1$-dimensional face $F_i$ for all $i \in \set{1, \dots, k-1}$.
    \end{enumerate}
\end{definition}

Observe that because of the orientation of the simplicial complex, the orientation of the faces of the simplices in a sequence are consistent. We want to show that this consistent orientation also extends to faces of the simplices in the sequence. In order to do this we need to introduce what we mean by \textit{sequence of faces}. We will then show that the orientation of the simplicial complex implies that the orientation of the faces of the simplices in a sequence are consistent.

\begin{definition}[Sequence of faces]
    \label{def:sequence_of_faces}
    A \emph{sequence of faces} of a simplicial sequence $\left(S_i\right)_{i=1}^{k}$  is a sequence $\left(L_i\right)_{i=1}^{k}$ of simplices such that:
    \begin{enumerate}
        \item \marginnote[0mm]{Notice that the face $L_i$ can be of dimension $d-1$ or $d-2$, in this definition.} $L_i$ is a subsimplex of the simplices $S_i$ for all $i \in \set{1, \dots, k}$.
        \item $L_i$ and $L_{i+1}$ share a $d-2$-dimensional face $G_i$ for all $i \in \set{1, \dots, k-1}$.
    \end{enumerate}
\end{definition}

We now want to show that such a sequence of face is consistent with the orientation of the simplicial complex.
\begin{proposition}[Orientation of sequences of faces]
    \label{prop:orientation_of_sequences_of_faces}
    Let $\left(S_i\right)_{i=1}^{k}$ be a simplicial sequence, and $\left(L_i\right)_{i=1}^{k}$ a sequence of faces of the simplices in the sequence. Then the orientation of the faces $L_i$ is consistent.
\end{proposition}
\begin{proof}
    It suffices to show that for any two faces $L_i$ and $L_j$, the induced orientation of $Q = L_i \cap L_j$ in $L_i$ and $L_j$ are opposite. We proceed by case distinction:
    \begin{case}{1}
        Assume that $L_i$ and $L_j$ are faces of the same simplex $S$, then $Q$ is a face of $S$ and the induced orientation of $Q$ in $L_i$ and $L_j$ are opposite by \cref{claim:opposite_orientations}.
    \end{case}
    \begin{case}{2}
        Assume that $L_i$ and $L_j$ are faces of two simplices $S_1$ and $S_2$ which share a common face $F$. Then $Q$ is a face of $F$ and the induced orientation of $Q$ in $L_i$ and $L_j$ are opposite by \cref{claim:opposite_orientations}.
    \end{case}
    This shows that the orientation of the faces of the simplices in a sequence is consistent.
\end{proof}

\section{Properties of the coloring of \Tarski\ instances}[Properties of the coloring]

In this section we want to discuss different properties with the coloring of \Tarski\ instances have. This will be helpful in arguing that the resulting \EndOfLine\ instance does not contain any cycles. We will start with general properties and then move on to properties of sequences of simplices.

\subsection{General properties of the coloring}

\marginnote{Recall that the coloring was given by: \begin{align*}
        c(x) =
        \begin{cases}
            0 & \text{if $x \leq f(x)$}         \\
            1 & \text{else if $x[1] > f(x)[1]$} \\
              & \vdots                          \\
            d & \text{else if $x[d] > f(x)[d]$}
        \end{cases}
    \end{align*}}
In this section we will assume that we are working on a integer lattice $L$, and that for a function $f : L \rightarrow L$, the points have been colored $c : L \rightarrow \set{0, \dots, d}$ as in \cref{sec:tarskistar_to_sperner}. Now we are ready to present a first observation, which will be a helpful stepping stone for more advanced results.

\begin{lemma}
    Assume that $f$ is monotone and that we have $x_i, x_j \in L$, $c(x_i) = i$ and $c(x_j) = j$ for $i, j \in \set{1, \dots, d}$ and $x_i[i] = x_j[i]$, then either:
    \begin{enumerate}
        \item $i \geq j$ or
        \item $i < j$  and $x_i \not\geq x_j$
    \end{enumerate}
\end{lemma}
\begin{proof}
    Assume that $i < j$ and $x_i \geq x_j$. We must then have $f(x_j)[i] \geq x_j[i] = x_i[i] > f(x_i)[i]$. Now by monoticity of $f$ we must have $f(x_i) \geq f(x_j)$, which is not possible if $f(x_j)[i] > f(x_i)[i]$. Hence we must have $x_i \not\geq x_j$. This shows that the lemma holds.
\end{proof}

For vertices of a given simplex we get the following corollary.
\marginnote[10mm]{Notice that if we assume that $x_i$ and $x_j$ are in the same simplex of the simplicial decomposition, then the condition $x_i \not\geq x_j$ is equivalent to $x_i \leq x_j$.}
\begin{corollary}
    Assume that $f$ is monotone and that we have $x_i, x_j \in S$, for some simplex $S\in  \mathcal{S}$. Further assume that $c(x_i) = i$ and $c(x_j) = j$ for $i, j \in \set{1, \dots, d}$ with $i < j$ and that $x_i[i] = x_j[i]$, then $x_i < x_j$.
\end{corollary}
\begin{proof}
    $x_i \leq x_j$, follows immediately. Because $x_i$ and $x_j$ are colored differently, they can not be equal which shows the strict inequality.
\end{proof}
\subsection{Properties of sequences of simplices}

Now we want to work with sequences of simplices, and show that the coloring of the vertices of these simplices have some nice properties. We start by defining what we mean by a sequence of simplices. Let $C \subset \{0, \dots, d\}$ be a subset of colors.
\begin{definition}[Valid sequence of simplices]
    \label{def:valid_sequence_simplices}
    \marginnote[-10mm]{Notice that this means that the first and last simplex of the sequence could be colored with any color. All other simplices must be colored with colors in $C$.}
    A \emph{valid sequence of simplices for colors $C$} is a sequence $\left(S_i\right)_{i=1}^{k}$ of simplices as defined previously in \cref{def:sequence_of_simplices} such that the $F_i$ are colored exactly colors of $C$.
\end{definition}
These sequences are the objects that latter get reduced to paths in the \EndOfLine\ instance, which is why we want to study them in detail. We define the some more terminology to help us with this.
\begin{definition}[Cycle]
    \marginnote[-10mm]{Note that the empty sequence, and all sequences consisting of a single simplex are cycles.}
    A \emph{cycle of simplices for colors $C$} is a valid sequence $\left(S_i\right)_{i=1}^{k}$ of simplices $S_i \in \mathcal{S}$ for colors $C$ such that $S_{k+1} = S_1$.
\end{definition}
\begin{definition}[Maximal sequence]
    \marginnote[-10mm]{Inuitively we say that a sequence is maximal if we cannot make it longer by adding simplices at the beginning or end.}
    A \emph{maximal sequence of simplices for colors $C$} is a valid sequence $\left(S_i\right)_{i=1}^{k}$ of simplices $S_i \in \mathcal{S}$ for colors $C$ such that:
    \begin{enumerate}
        \item There is no simplex $S_{k+1} \in \mathcal{S}$ such that $\left(S_i\right)_{i=1}^{k+1}$ is a valid sequence.
        \item There is no simplex $S_{0} \in \mathcal{S}$ such that $\left(S_i\right)_{i=0}^{k}$ is a valid sequence.
    \end{enumerate}
\end{definition}
Finally we want to define the sequence of all transitions between simplices in a sequence.
\begin{definition}[Transition sequence]
    The \emph{transition sequence} of a valid sequence $\left(S_i\right)_{i=1}^{k}$ of simplices $S_i \in \mathcal{S}$ is the sequence $\left(F_i\right)_{i=1}^{k-1}$ of $(d-1)$-dimensional faces $F_i = S_i \cap S_{i+1}$.
\end{definition}

We now are ready to study the properties of these sequence in more detail. We now restrict ourselves to the case where $C \subset \{0, \dots, d\}$ contains exactly $d$ colors (i.e.~only one color is left out). Notice that for a valid sequence $\left( S_i \right)_{i=1}^k$ we then have that the transition sequence $\left( F_i \right)_{i=1}^{k-1}$ is a sequence of $(d-1)$-dimensional simplices $S_i$ which are colored with all $d$ colors of $C$. This means that for every $j \in C$ we get a sequence of vertices $(x_i^j)_{i=1}^k$ such that $x_i^j \in F_i$ and $c(x_i^j) = j$. We will now study this special case in more detail.

\begin{lemma}
    Let $S_i$, $F_i$ and $x_j$ be as above. For any $i \in \set{1, \dots, k-1}$ there is exactly one $j \in C$ such that we have $x_i^j \neq x_{i+1}^j$.
\end{lemma}
\begin{proof}
    $F_i$ and $F_{i+1}$ are two faces of the same $d$ dimensional simplex, and thus they share exactly $d-1$ vertices. This means that there is exactly one vertex $x$ which is in $F_i$ but not in $F_{i+1}$, and exactly one vertex $y$ which is in $F_{i+1}$ but not in $F_i$. This means that there is exactly one $j$ such that $x_i^j = x$ and $x_{i+1}^j = y$.
\end{proof}

Now for a valid sequence $\left(S_i\right)_{i=1}^{k}$ of simplices, inside the color set $C = \{0, \dots, d-1\}$ we can consider all the vertices that are not colored with the color $0$. These vertices have a nice structure as the following proposition shows.

\begin{proposition}
    Let $\left(S_i\right)_{i=1}^{k}$ be a valid sequence of simplices for colors $C = \{0, \dots, d-1\}$, then defining $L_i$ to be the face of $S_i$ which is spanned by the vertices colored with colors in $C \setminus \set{0}$. Then the sequence $\left(L_i\right)_{i=1}^{k}$ is a sequence of faces as defined in \cref{def:sequence_of_faces}.
\end{proposition}
\begin{proof}
    We need to show that the two conditions set by \cref{def:sequence_of_faces} are satisfied. The first condition is immediate as $L_i$ is a face of $S_i$. For the second condition we need to show that $L_i$ and $L_{i+1}$ share a $d-2$-dimensional face for every $i \in \set{1, \dots, k-1}$. In order to see this notice that $S_i$ and $S_{i+1}$, share a common face $F_i$, which contains exactly one vertex colored with color $0$. This means that $L_i$ and $L_{i+1}$ share a $d-2$-dimensional face of $F_i$, and hence a $d-2$ dimensional face of $S_i$ and $S_{i+1}$.
\end{proof}

As a direct consequence of this proposition we get the following corollary, which will be a key tool in the discussion on cycles in the \EndOfLine\ instance.

\begin{corollary}
    The $\left(L_i\right)_{i=1}^{k}$ defined above can be oriented consistently.
\end{corollary}
\begin{proof}
    This is a direct consequence of \cref{prop:orientation_of_sequences_of_faces}, which showed that the orientation of the faces of a sequence of simplices is consistent, when using the induced orientation of the faces by the individual simplices.
\end{proof}

\section{No cycles in the \EndOfLine\ instance}[No cycles in the \EndOfLine\ instance]

We are now ready to show that the \EndOfLine\ instance does not contain any cycles. We will do this by showing that the existence of a cycle would contradict the orientation of the simplicial complex. A cycle is a valid sequence such that $S_0$ and $S_k$ are a $(d-1)$-simplex as a face. We will show that certain situations cannot occur due to the orientation of the simplicial complex. And we will then argue that these situations must occur in a cycle. This will be enough to show that the \EndOfLine\ instance does not contain any cycles.
